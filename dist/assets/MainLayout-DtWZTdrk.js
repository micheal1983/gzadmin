import{_ as m,e as v,o as u,c as _,a as t,f as n,g as c,h as i,i as f,u as g,t as p,j as k}from"./index-J5bTViEi.js";const b={class:"left-container"},h={class:"module"},w={class:"module"},y={class:"module"},I={class:"module"},$={__name:"Left",setup(a){return(s,e)=>{const o=v("router-link");return u(),_("section",b,[t("ul",h,[e[1]||(e[1]=t("li",{class:"item title"},"后台管理系统",-1)),t("li",null,[n(o,{to:"/home",class:"item link","active-class":"is-active"},{default:c(()=>[...e[0]||(e[0]=[i("控制台首页",-1)])]),_:1})])]),t("ul",w,[e[4]||(e[4]=t("li",{class:"item title"},"游戏管理",-1)),t("li",null,[n(o,{to:"/game-add",class:"item link","active-class":"is-active"},{default:c(()=>[...e[2]||(e[2]=[i("添加游戏",-1)])]),_:1})]),t("li",null,[n(o,{to:"/game-list",class:"item link","active-class":"is-active"},{default:c(()=>[...e[3]||(e[3]=[i("游戏列表",-1)])]),_:1})])]),t("ul",y,[e[7]||(e[7]=t("li",{class:"item title"},"文章管理",-1)),t("li",null,[n(o,{to:"/article-add",class:"item link","active-class":"is-active"},{default:c(()=>[...e[5]||(e[5]=[i("添加文章",-1)])]),_:1})]),t("li",null,[n(o,{to:"/article-list",class:"item link","active-class":"is-active"},{default:c(()=>[...e[6]||(e[6]=[i("文章列表",-1)])]),_:1})])]),t("ul",I,[e[9]||(e[9]=t("li",{class:"item title"},"频道管理",-1)),t("li",null,[n(o,{to:"/channel-list",class:"item link","active-class":"is-active"},{default:c(()=>[...e[8]||(e[8]=[i("频道列表",-1)])]),_:1})])])])}}},x=m($,[["__scopeId","data-v-599363f6"]]);class d extends Error{}d.prototype.name="InvalidTokenError";function C(a){return decodeURIComponent(atob(a).replace(/(.)/g,(s,e)=>{let o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function S(a){let s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return C(s)}catch{return atob(s)}}function D(a,s){if(typeof a!="string")throw new d("Invalid token specified: must be a string");s||(s={});const e=s.header===!0?0:1,o=a.split(".")[e];if(typeof o!="string")throw new d(`Invalid token specified: missing part #${e+1}`);let r;try{r=S(o)}catch(l){throw new d(`Invalid token specified: invalid base64 for part #${e+1} (${l.message})`)}try{return JSON.parse(r)}catch(l){throw new d(`Invalid token specified: invalid json for part #${e+1} (${l.message})`)}}const E={key:0},L={key:1},T={__name:"Top",setup(a){const s=k(null);f(()=>{const r=localStorage.getItem("token");if(r)try{const l=D(r);s.value=l.data,console.log("用户信息：",s.value)}catch(l){console.error("Token 解析失败：",l)}});const e=g(),o=()=>{localStorage.removeItem("token"),alert("已退出登录"),e.push("/login")};return(r,l)=>s.value?(u(),_("div",E,[i(" 欢迎回来，"+p(s.value.username)+" (ID: "+p(s.value.uid)+") [",1),t("span",{class:"link",onClick:o},"退出登录"),l[0]||(l[0]=i("] ",-1))])):(u(),_("div",L," 正在加载用户信息... "))}},N={class:"admin-layout"},U={class:"sidebar"},j={class:"main-wrapper"},B={class:"header-bar"},M={class:"content-body"},V={__name:"MainLayout",setup(a){return console.log(localStorage.getItem("token")),(s,e)=>{const o=v("router-view");return u(),_("div",N,[t("div",U,[n(x)]),t("div",j,[t("div",B,[n(T)]),t("div",M,[n(o)])])])}}},A=m(V,[["__scopeId","data-v-9b5dacbb"]]);export{A as default};
